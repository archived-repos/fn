/*! jstool-core 2014-12-13 */
!function(){"use strict";var a=function(a,b){window.console[a].apply(window.console,b)},b=function(){},c=b,d=function(){c("log",Array.prototype.slice.call(arguments))};["info","warn","debug","error"].forEach(function(a){d[a]=void 0!==window.console?function(){c(a,Array.prototype.slice.call(arguments))}:b}),d.enable=function(e){e=void 0===e?!0:e,c=e&&void 0!==window.console?a:b,d("log is enabled")},d.clear=function(){d.history=[],window.console&&console.clear()},window.enableLog&&d.enable(),window.log=d}(),function(){"use strict";function a(b,c){if(c)a.define(b,c);else{if(e.isArray(b))return f[b];if(e.isString(b))return f[b];a.run(b)}}function b(a,b){h[a]=h[a]||[],h[a].push(b)}function c(a){var b=f[a];if(e.isArray(h[a]))for(var c=0,d=h[a].length;d>c;c++)h[a][c](b)}var d="undefined"==typeof window?module.exports:window,e={isFunction:function(a){return a instanceof Function},isArray:function(a){return a instanceof Array},isString:function(a){return"string"==typeof a},isNumber:function(a){return a instanceof Number},isObject:function(a,b){return a instanceof Object?"any"===b?!0:typeof a===(b||"object"):!1},key:function(a,b,c){if(!a instanceof Object)return!1;var d=b.split("."),e=a||{};if(void 0!==c){if(d.length){for(var f,g=d.shift();f=d.shift();)a[g]||(a[g]={}),a=a[g],g=f;a[g]=c}return c}for(var g,h=0,i=d.length;i>h;h++){if(g=d[h],!(g in e))return!1;e=e[d[h]]||{}}return e},keys:Object.keys,globalize:function(a,b){if(b)d[a]=b;else if(a)d[a]=f[a];else for(var a in f)d[a]=f[a]}},f={_:e},g=/^function[^\(]\(([^\)]*)/,h={};a.run=function(b){var c;e.isArray(b)?c=b.pop():e.isFunction(b)&&(c=b,b=c.toString().match(g)[1].split(",")||[]),c instanceof Function&&a.require(b,c)},a.define=function(b,d){if(e.isString(b)){var h;e.isArray(d)?h=d.pop():e.isFunction(d)&&(h=d,d=[],h.toString().replace(g,function(a,b){b=b.replace(/\s/g,""),b&&b.replace(/([^,]+),?/,function(a,b){d.push(b)})})),a.require(d,function(){f[b]=h.apply(f,arguments),log("fn defined: ",b),c(b)})}},a.require=function(b,c){if(!e.isFunction(c))return!1;var d=function(){for(var a=0,d=b.length,e=[];d>a;a++)b[a]&&e.push(f[b[a]]);c.apply(f,e)};if(e.isString(b)&&(b=[b]),e.isArray(b))if(b.length){for(var g=0,h=b.length,i=0;h>g;g++)b[g]&&!f[b[g]]&&(i++,a.defer(function(){a.when(b[g],function(){i--,!i&&d()})}));!i&&d()}else d()},a.when=function(a,c){e.isFunction(c)&&(f[a]?c.apply(context,definition):b(a,function(){c.apply(context,definition)}))},a.defer=function(a,b){e.isFunction(a)&&setTimeout(a,b||0)},a.globalize=e.globalize,e.globalize("fn",a)}();