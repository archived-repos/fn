/*! jstool-core 2014-11-29 */
!function(){"use strict";Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=this;if(arguments.length<=1)return function(){return b.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,0===arguments.length?c:c.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){void 0===b&&(b=0),0>b&&(b+=this.length),0>b&&(b=0);for(var c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(a,b){for(void 0===b&&(b=this.length-1),0>b&&(b+=this.length),b>this.length-1&&(b=this.length-1),b++;b-->0;)if(b in this&&this[b]===a)return b;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)}),"map"in Array.prototype||(Array.prototype.map=function(a,b){for(var c=new Array(this.length),d=0,e=this.length;e>d;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c}),"filter"in Array.prototype||(Array.prototype.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)e in this&&a.call(b,c=this[e],e,this)&&d.push(c);return d}),"every"in Array.prototype||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1})}(),function(){"use strict";var a=function(a,b){window.console[a].apply(window.console,b)},b=function(){},c=b,d=function(){c("log",Array.prototype.slice.call(arguments))};["info","warn","debug","error"].forEach(function(a){d[a]=void 0!==window.console?function(){c(a,Array.prototype.slice.call(arguments))}:b}),d.enable=function(e){e=void 0===e?!0:e,c=e&&void 0!==window.console?a:b,d("log is enabled")},d.clear=function(){d.history=[],window.console&&console.clear()},window.enableLog&&d.enable(),window.log=d}(),function(){"use strict";function a(b,c){if(c)a.define(b,c);else{if(d.isArray(b))return e[b];if(d.isString(b))return e[b];a.run(b)}}function b(a,b){h[a]=h[a]||[],h[a].push(b)}function c(a){if(d.isArray(h[a]))for(var b=0,c=h[a].length;c>b;b++)h[a][b]()}var d={isFunction:function(a){return a instanceof Function},isArray:function(a){return a instanceof Array},isString:function(a){return"string"==typeof a},isNumber:function(a){return a instanceof Number},isObject:function(a,b){return a instanceof Object?"any"===b?!0:typeof a===(b||"object"):!1},key:function(a,b,c){if(!a instanceof Object)return!1;var d=b.split("."),e=a||{};if(void 0!==c){if(d.length){for(var f,g=d.shift();f=d.shift();)a[g]||(a[g]={}),a=a[g],g=f;a[g]=c}return c}for(var g,h=0,i=d.length;i>h;h++){if(g=d[h],!(g in e))return!1;e=e[d[h]]||{}}return e},keys:Object.keys,globalize:function(a,b){("undefined"==typeof window?module.exports:window)[a]=b?b:e[a]}},e={_:d},f=/^function[^\(]\(([^\)]*)/,g=function(a,b){return!Object.keys(a).length&&d.isFunction(b)?(b(),!0):!1},h={};a.run=function(b){var c;d.isArray(b)?c=b.pop():d.isFunction(b)&&(c=b,b=c.toString().match(f)[1].split(",")),c instanceof Function&&a.require(b,function(){c.apply(e,this.injections)})},a.define=function(b,g){if(d.isString(b)){var h;d.isArray(g)?h=g.pop():d.isFunction(g)&&(h=g,g=[],h.toString().replace(f,function(a,b){b=b.replace(/\s/g,""),b&&b.replace(/([^,]+),?/,function(a,b){g.push(b)})})),a.require(g,function(){e[b]=h.apply(e,this.injections),log("fn defined: ",b),c(b)})}},a.require=function(b,c){if(!d.isFunction(c))return!1;var f=function(){for(var a=[],d=0,f=b.length;f>d;d++)a.push(e[b[d]]);c.call({injections:a})};if(d.isArray(b))if(b.length){for(var h={},i=0,j=b.length;j>i;i++)e[b[i]]||(h[b[i]]=!0);g(h,f)||b.forEach(function(b){a.when(b,function(){delete h[b],g(h,f)})})}else f();else d.isString(b)&&a.when(b,f)},a.when=function(a,c){d.isFunction(c)&&(e[a]?c():b(a,c))},a.defer=function(a){d.isFunction(a)&&setTimeout(a,0)},a.globalize=d.globalize,d.globalize("fn",a)}();