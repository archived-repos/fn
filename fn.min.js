/*! jstools-fn 2015-05-02 */
!function(){"use strict";function a(a){return function(b){return b instanceof a}}function b(a){return"string"==typeof a}function c(a,b){if(b)h[a]=b;else if(a)h[a]=k[a];else for(a in k)h[a]=k[a]}function d(a,c,e){return b(a)?void 0===c?k[a]:d.define(a,c,e):(d.run(a,c,e),d)}function e(a,b){m[a]=m[a]||[],m[a].push(b)}function f(a){var b=k[a];if(j(m[a]))for(var c=0,d=m[a].length;d>c;c++)m[a][c](b)}function g(a,b){k[a]=b,console.debug("fn defined: ",a),f(a),delete d.waiting[a]}var h="undefined"==typeof window?module.exports:window,i=a(Function),j=a(Array),k=(a(Object),{}),l=/^function[^\(]\(([^\)]*)/,m={};d.waiting={},d.run=function(a,b,c){return j(a)?void 0===b&&(b=a.pop()):i(a)&&(c=b,b=a,a=b.toString().match(l)[1].split(",")||[]),b instanceof Function&&d.require(a,b,c),d},d.define=function(a,c,e){if(b(a)){j(c)?void 0===e&&(e=c.pop()):i(c)&&(e=c,c=[],e.toString().replace(l,function(a,b){b=b.replace(/\s/g,""),b&&b.replace(/([^,]+),?/,function(a,b){c.push(b)})})),d.waiting[a]=c,d.require(c,function(){var b=e.apply(k,arguments);b&&b.then instanceof Function?b.then(function(b){setTimeout(function(){g(a,b)},0)}):g(a,b)})}return d},d.require=function(a,c,f){if(!i(c))return!1;var g=function(){for(var b=0,d=a.length,e=[];d>b;b++)a[b]&&e.push(k[a[b]]);c.apply(f||k,e)};if(g.pending=0,g._try=function(){g.pending--,g.pending||g()},g._add=function(a){k[a]||(g.pending++,d.defer(function(){k[a]?g._try():e(a,g._try)}))},b(a)&&(a=[a]),j(a))if(a.length){for(var h=0,l=a.length;l>h;h++)a[h]&&g._add(a[h]);g.pending||g()}else g();return d},d.when=function(a,b,c){return i(b)&&(k[a]?b.apply(c,k[a]):e(a,function(a){b.apply(c,a)})),d},d.defer=function(a,b){return setTimeout(a,b||0),d},d.globalize=c,c("fn",d),h.define||(h.define=d.define),"undefined"!=typeof window&&(d.load=window.addEventListener?function(a){return window.addEventListener("load",a,!1),d}:function(a){return window.attachEvent("onload",a),d}),d.ready=function(a){return a instanceof Function&&(/loaded|complete/.test(document.readyState)?a():d.load(a)),d},d.ready(function(){var a,b,c,e,f={};for(b in d.waiting)for(a=d.waiting[b],f[b]=[],c=0,e=a.length;e>c;c++)k[a[c]]||f[b].push(a[c]);if(Object.keys(f).length){console.group("missing dependencies");for(b in f)console.log(b,f[b]);console.groupEnd()}})}();